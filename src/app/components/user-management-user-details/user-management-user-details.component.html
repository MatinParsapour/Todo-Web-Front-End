<mat-spinner class="loader" *ngIf="isLoading"></mat-spinner>
<button class="arrowBackButton" (click)="backToMain()" mat-icon-button>
  <span class="material-icons">
    arrow_back
  </span>
</button>
<div>
  <div class="user">
    <img *ngIf="user.profileImageUrl" [src]="user.profileImageUrl" alt="">
    <div [class.lineThrough]="user.isDeleted"></div>
    <div [class.lineThrough]="user.isDeleted" [class.minust45degree]="user.isDeleted"></div>
    <img *ngIf="!user.profileImageUrl"
      src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fdevitt-forand.com%2Fwp-content%2Fuploads%2F2018%2F05%2Fperson-icon.png&f=1&nofb=1"
      alt="">
    <div class="authorities">
      <div *ngFor="let authority of user.authorities">
        {{authority}}
      </div>
    </div>
  </div>
  <div class="detailsCard">
    <mat-card class="details">
      <div>
        <div class="fontSize20">
          <p>Name 
              <mat-form-field appearance="fill">
                <mat-label>As a</mat-label>
                <select [disabled]="user.isDeleted" matNativeControl [(ngModel)]="user.role" name="car">
                  <option *ngFor="let role of roles" [value]="role">
                    {{role | cutter : 'first' : 5 | titlecase | replacer : '_' : ' '}}
                  </option>
                </select>
              </mat-form-field></p>
          <mat-card> <span [class.hasBorder]="contentEditable" [contentEditable]="contentEditable" #fName
              (blur)="user.firstName = fName.innerText">

            {{user.firstName}}
          </span>
           <span [class.hasBorder]="contentEditable" [contentEditable]="contentEditable" #lName
             (blur)="user.lastName = lName.innerText">
             {{user.lastName}}
            </span>
          </mat-card>
        </div>
        <div class="fontSize20">
          <p>Birthday</p>
          <mat-card> {{user.birthDay ? user.birthDay : '-'}} </mat-card>
        </div>
        <div class="fontSize20">
          <p>Age</p>
          <mat-card> {{user.age ? user.age : '-'}} </mat-card>
        </div>
      </div>
      <div>
        <div class="fontSize20">
          <p>Email</p>
          <mat-card> <span class="email" [class.hasBorder]="contentEditable" [contentEditable]="contentEditable" #email
              (blur)="user.email = email.innerText">{{user.email}}</span>
          </mat-card>
        </div>
        <div class="fontSize20">
          <p>Phone number</p>
          <mat-card> <span [class.hasBorder]="contentEditable" [contentEditable]="contentEditable" #phoneNumber
              (blur)="setPhoneNumber(phoneNumber.innerHTML)">{{user.phoneNumber ? user.phoneNumber : '-'}}</span>
              </mat-card>
        </div>
        <div class="fontSize20">
          <p>Blocked</p>
          <mat-card class="blocked"> {{user.isBlocked ? "Yes" : 'No'}} <button (click)="blockUser()" class="blockButton"
              [disabled]="!isSuperAdmin || user.isDeleted" [matTooltip]="'Block ' +  user.firstName + ' ' + user.lastName"
              class="blockButton" mat-icon-button>
              <mat-icon>block</mat-icon>
            </button> </mat-card>
        </div>
        <div class="fontSize20">
          <p>Deleted</p>
          <mat-card class="blocked"> {{user.isDeleted ? "Yes" : 'No'}} </mat-card>
        </div>
      </div>
      <button class="editButton" mat-icon-button [disabled]="user.isDeleted" (click)="makeContentsEditable()">
        <mat-icon>edit</mat-icon>
      </button>
    </mat-card>
  </div>
</div>
<div class="buttons">
  <button mat-flat-button [disabled]="user.isDeleted" (click)="updateUser()" color="primary">Update <mat-icon>update</mat-icon></button>
</div>
