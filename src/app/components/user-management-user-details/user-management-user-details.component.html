<mat-spinner class="loader" *ngIf="isLoading"></mat-spinner>
<button (click)="backToMain()" mat-icon-button>
  <span class="material-icons">
    arrow_back
  </span>
</button>
<mat-spinner *ngIf="isLoading"></mat-spinner>
<div>
  <div class="user">
    <img *ngIf="user.profileImageUrl" [src]="user.profileImageUrl" alt="">
    <img *ngIf="!user.profileImageUrl"
      src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fdevitt-forand.com%2Fwp-content%2Fuploads%2F2018%2F05%2Fperson-icon.png&f=1&nofb=1"
      alt="">
    <div class="authorities">
      <div *ngFor="let authority of user.authorities">
        {{authority}}
      </div>
    </div>
  </div>
  <div class="detailsCard">
    <mat-card class="details">
      <div>
        <div class="fontSize20">
          <p>Name " {{user.role | cutter : 'first' : 5 | titlecase | replacer : "_" : " " }} "</p>
          <mat-card> <span [contentEditable]="contentEditable" #fName (blur)="user.firstName = fName.innerText">

            {{user.firstName}}
          </span>
           <span [contentEditable]="contentEditable" #lName (blur)="user.lastName = lName.innerText">
             {{user.lastName}}
            </span>
          </mat-card>
        </div>
        <div class="fontSize20">
          <p>Birthday</p>
          <mat-card> {{user.birthDay ? user.birthDay : '-'}} </mat-card>
        </div>
        <div class="fontSize20">
          <p>Age</p>
          <mat-card> {{user.age ? user.age : '-'}} </mat-card>
        </div>
      </div>
      <div>
        <div class="fontSize20">
          <p>Email</p>
          <mat-card> <span [contentEditable]="contentEditable" #email
              (blur)="user.email = email.innerText">{{user.email}}</span>
          </mat-card>
        </div>
        <div class="fontSize20">
          <p>Phone number</p>
          <mat-card> {{user.phoneNumber ? user.phoneNumber : '-'}} </mat-card>
        </div>
        <div class="fontSize20">
          <p>Blocked</p>
          <mat-card class="blocked"> {{user.isBlocked ? "Yes" : 'No'}} <button (click)="blockUser()" class="blockButton"
              [disabled]="!isSuperAdmin" [matTooltip]="'Block ' +  user.firstName + ' ' + user.lastName"
              class="blockButton" mat-icon-button>
              <mat-icon>block</mat-icon>
            </button> </mat-card>
        </div>
      </div>
      <button class="editButton" mat-icon-button (click)="makeContentsEditable()">
        <mat-icon>edit</mat-icon>
      </button>
    </mat-card>
  </div>
</div>
<div class="buttons">
  <button mat-flat-button (click)="updateUser()" color="primary">Update <mat-icon>update</mat-icon></button>
</div>
